
<!DOCTYPE html>
<html>
<body>

<h1>Jo SRL Demo</h1>

  Sentence: <input id="sent" type="text" size=80 name="sentence">
<button id="btn" type="button" style="background-color:LightBlue" onclick="annotate()">  <b>Submit</b></button>
<br>
<br>

<div id="demo"></div>
<div><pre id="error"> </pre></div>
<script src="svg-pan-zoom.min.js"></script>
<script>
// Get the input field
var input = document.getElementById("sent");
// Execute a function when the user releases a key on the keyboard
input.addEventListener("keyup", function(event) {
  // Cancel the default action, if needed
  event.preventDefault();
  // Number 13 is the "Enter" key on the keyboard
  if (event.keyCode === 13) {
    // Trigger the button element with a click
    document.getElementById("btn").click();
  }
});

  
function annotate() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          obj = JSON.parse(this.responseText);
          old = document.getElementById("demo").innerHTML
          document.getElementById("demo").innerHTML = obj.payload + old;
          var svgElement = document.querySelector(".displacy");
          var panZoom = svgPanZoom(svgElement);
          if (obj.error) {
              document.getElementById("error").innerHTML = obj.error;
          }
      }
  };
  var sentence = input.value;
  var request = {"endpoint": "annotate",
             "payload": {"sent": sentence}}
  xhttp.open("POST", "http://ec2-18-218-211-57.us-east-2.compute.amazonaws.com:5556", true);
  xhttp.setRequestHeader("Content-type", "application/json");
  xhttp.send(JSON.stringify(request));
}

</script>

</body>
</html>
